function map_collection(e,t){for(var n=e.length,i=[],r=0;n>r;r++)i.push(t(e[r]));return i}String.prototype.capitalize=String.prototype.capitalize||function(){for(var e=this.split(" ").filter(Boolean),t=e.length,n="",i=0;t>i;i++)n=n+e[i].charAt(0).toUpperCase()+e[i].slice(1).toLowerCase()+" ";return n.slice(0,n.length-1)},String.prototype.to_camelCase=String.prototype.to_camelCase||function(){for(var e=this.split("_").filter(Boolean),t=e.length,n="",i=0;t>i;i++)n+=0===i?e[i].toLowerCase():e[i].capitalize();return n};var parseXML=function(){if("undefined"!=typeof window.DOMParser)return function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};if("undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM"))return function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};throw new Error("No XML parser found")}();!function(){var e=angular.module("AndroidInflater",[]);e.controller("TabController",["$scope",function(e){var t=this;e.currentTab=0,this.visibility_options=[{label:"private",value:"private"},{label:"public",value:"public"},{label:"none",value:""}],e.xml_opt_visibility=this.visibility_options[0].value,e.xml_options={camelCase:!1,declareInline:!1,visibility:e.xml_opt_visibility,makeFinal:!1,addButtonOnClickListener:!1},e.var_declaration_options={declareInline:!1,addButtonOnClickListener:!0,camelCase:!1,makeFinal:!1},e.xml_output="",e.var_declaration_output="",e.setTab=function(n){e.currentTab=n;var i=0===n?e.xml_output:e.var_declaration_output;i||(e.$apply(),t.selectInput())},e.showTab=function(t){return t===e.currentTab},e.inflate=function(t,n){var i="Paste into the input box an Android layout or resource xml file",r="Paste into the input box Java variable declarations";if(0===e.currentTab){var a=e.xml_options;a.visibility=e.xml_opt_visibility;var o=document.getElementById("xml_input").value;if(o.match(/^$|^[\s\t\n]+$/))e.xml_output=i;else try{var l=android_inflate_xml.element_list_from_xml(o,a);e.xml_output=l.declaration+"\n\n"+l.inflated_java}catch(u){e.xml_output="Could not be parsed:\n"+o}}else{var a=e.var_declaration_options,o=document.getElementById("java_input").value;if(o.match(/^$|^[\s\t\n]+$/))e.var_declaration_output=r;else{var c=java_declaration_parser.element_array_from_declaration(o,a);e.var_declaration_output=android_inflate_xml.inflate_element_list(c,a)}}},e.inline_checked_action=function(){e.xml_options.declareInline&&(e.xml_opt_visibility="")},e.selectResults=function(){var n=0===e.currentTab?"xml_output":"java_output";t.select_textarea(n)},this.selectInput=function(){var n=0===e.currentTab?"xml_input":"java_input";t.select_textarea(n)},this.select_textarea=function(e){document.getElementById(e).select()},this.init=function(){t.selectInput()},this.init()}])}();var java_declaration_parser=function(){function e(e,i){var r=t(e),a=n(r);return a}function t(e){var t=e.replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g," ").replace(/\/\/(.)*\n|\/\/(.)*$|\bstatic\b|\bfinal\b|\bpublic\b|\bprivate\b|\bprotected\b|^\s+/g,"").replace(/[\s]*;[^A-Z\/]*/gi,";").replace(/\s+/g," ").split(";").filter(Boolean);return t}function n(e){var t=e.map(function(e){return i(e)}),n=[];return n.concat.apply(n,t)}function i(e){var t={};if(e.match(/^\/\//))return t.comment=!0,t.identifier=e,t;var n=e.split(" ").filter(Boolean),i=r([n.shift(),n.join("")]);return i?i:(n=e.split(" ").filter(Boolean),2===n.length?(t.type=n[0],t.identifier=n[1]):(t.invalid=!0,t.identifier=e),t)}function r(e){if(e.length<2)return!1;var t=e[1].split(",").filter(Boolean);if(1===t.length)return!1;var n=e[0],i=t.map(function(e){return{type:n,identifier:e}});return i}return{element_array_from_declaration:function(t,n){return e(t,n)}}}(),android_inflate_xml=function(){function e(e,t,r){var o="resources"===r?a(t):i(t);return e.map(function(e){o=o+h(e,t).replace(";","")+" ="+n(e,t).replace(/^.*=/,""),"Button"===e.type&&t.addButtonOnClickListener&&(o=o+"\n"+u(e,t)),o+="\n"}),o}function t(e,t){var r=i(t);return e.map(function(e){r+=n(e,t),"Button"===e.type&&t.addButtonOnClickListener&&(r=r+"\n"+u(e,t)),r+="\n"}),r}function n(e,t){return e.invalid?m(e,t):"String"===e.type?c(e,t):"int"===e.type?f(e,t):"bool"===e.type?d(e,t):"double"===e.type?s(e,t):e.type.match(/\[\]$/)?p(e,t):l(e,t)}function i(e){return"//Inflate UI\n"}function r(e){return"//Declare UI elements\n"}function a(e){return"//Declare resources\n"}function o(e,t){var n=t.camelCase?e.identifier.to_camelCase():e.identifier;return n}function l(e,t){return o(e,t)+" = ("+e.type+") findViewById(R.id."+e.identifier+");"}function u(e,t){return o(e,t)+".setOnClickListener(new View.OnClickListener() {\n	public void onClick(View v) {\n		// Perform action on click\n	}\n});"}function c(e,t){return o(e,t)+" = getResources().getString(R.string."+e.identifier+");"}function s(e,t){return o(e,t)+" = Double.parseDouble(getResources().getString(R.string."+e.identifier+"));"}function f(e,t){return o(e,t)+" = getResources().getInteger(R.integer."+e.identifier+");"}function d(e,t){return o(e,t)+" = getResources().getBoolean(R.bool."+e.identifier+");"}function p(e,t){var n=e.type.replace("[]","");return n=n.capitalize(),o(e,t)+" = getResources().get"+n+"Array(R.array."+e.identifier+");"}function m(e,t){return"//"+e.identifier+" is not a valid declaration"}function v(n,i){var r=b(n,i),a=_(n);if(i.declareInline)return{declaration:e(r,i,a),inflated_java:""};var o=g(r,i,a);return{declaration:o,inflated_java:t(r,i)}}function _(e){return parseXML(e).documentElement.nodeName}function b(e){var t=parseXML(e),n=t.documentElement.nodeName,i=t.documentElement.childNodes,r=[];return map_collection(i,function(e){y(e,r,n)}),r.filter(Boolean),r}function y(e,t,n){if(e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.COMMENT_NODE){var i="resources"===n&&e.nodeName.match(/-array$/)?x(e.nodeName):e.nodeName;switch(i){case"string":i="String";break;case"integer":i="int"}e.childNodes&&map_collection(e.childNodes,function(e){y(e,t,n)});try{var r=e.getAttribute("android:id"),a=e.getAttribute("name");if(!r&&!a)throw"no id or name - not valid android xml element"}catch(o){return}var l=r?r.replace(/@.*\//,""):"",u=a||l;t.push({type:i,identifier:u})}}function g(e,t,n){var i="resources"===n?a(t):r(t);return e.map(function(e){i=i+h(e,t)+"\n"}),i}function h(e,t){var n=t.visibility?t.visibility+" ":"",i=t.makeFinal?"final ":"",r=t.camelCase?e.identifier.to_camelCase():e.identifier;return n+i+e.type+" "+r+";"}function x(e){var t=e.replace(/-array$/,"");return t="string"===t?"String":t,t+"[]"}return{element_list_from_xml:function(e,t){return v(e,t)},inflate_element_list:function(n,i){return i.declareInline?e(n,i,"RelativeLayout"):t(n,i)}}}();